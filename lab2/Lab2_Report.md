# Лабораторная работа №2
<img src="/pics/titul1.jpg" alt="Титульный лист">

### Цель работы: 
Написать два Dockerfile – плохой и хороший. Плохой должен запускаться и работать корректно, но в нём должно быть не менее 3 “bad practices”. В хорошем Dockerfile они должны быть исправлены.В Readme описать все плохие практики из кода Dockerfile и почему они плохие, как они были исправлены в хорошем  Dockerfile, а также две плохие практики по использованию этого контейнера.

### Ход работы

Мы сделали Dockerfile, с помощью которого сервер на python должен возвращать строку, которую передают в качестве аргумента при запуске контейнера.

1) Написать скрипт (`server.py`), который будет открыт при помощи докер файла. В файле `server.py` представлен простой сервер, который возвращает строку - переменную окружения `MESSAGE`.

<img src="/pics/python_server.jpg" alt="">

2) Создать папки Good  docker и Bad docker, в каждой из них создать докер файл с помощью командной строки

<img src="/pics/create_docker.jpg" alt="">

3) Пишем good Dockerfile 

<img src="/pics/good-docker.jpg" alt="">

Команды:

`FROM python:3.12` - подключает python 3.12

`COPY ./server.py /task2/` - копирует из папки, в которой мы находимся (Good docker) скрипт `server.py`, после создания контейнера файл будет скопирован в папку `task2`

`RUN pip install Flask` - подключает питоновскую библиотеку Flask

`ENV MESSAGE="..."` - создает переменную окружения `MESSAGE`, которой присваивается стартовое значение

`VOLUME /data/` - после создания контейнера сохранение нужной информации будет происходить в папке `data`, в самой лабе это правда не использовалось

`WORKDIR /task2/` - устанавливает рабочую директорию в папку `task2`

`ENTRYPOINT [...]` - запуск основной команды

`EXPOSE 80` - открывает порт для контейнера, в данном случает 80-ый

5) Открываем Docker Desktop

6) В комндной строке собираем образ `good-docker`

<img src="/pics/good-image.jpg" alt="">

7) Запускаем контейнер `good-container`

<img src="/pics/good-cont-run.jpg" alt="">

С помощью команды `-e MESSAGE ="..."` передется значение в переменную окружения `MESSAGE`

8) Проверяем, что все работает. На первых двух картинках показано, что появился образ и контейнер в Docker Desktop, а на третей - результат

<img src="/pics/rez-image1.jpg" alt="">

<img src="/pics/rez-cont1.jpg" alt="">

<img src="/pics/rez1.jpg" alt="">

9) Пишем bad Dockerfile

<img src="/pics/bad_docker.jpg" alt="">

10) В комндной строке собираем образ `bad-docker`

<img src="/pics/bad_image0.jpg" alt="">

Поскольку мы не ввели дефолтное значение переменной окружения `MESSAGE`, у нас вылезла ошибка

Исправив ошибку, получается следующий Dockerfile

<img src="/pics/bad_docker1.jpg" alt="">

11) Снова запускаем образ `bad-docker` и запускаем контейнер `good-container`

<img src="/pics/bad_image1.jpg" alt="">

12) Проверяем, что все работает. На первых двух картинках показано, что появился образ и контейнер в Docker Desktop, а на третей - результат

<img src="/pics/rez-image.jpg" alt="">

<img src="/pics/rez-cont.jpg" alt="">

<img src="/pics/rez.jpg" alt="">

Видно, что, несмотря на все “bad practices”, все  работает исправно, у нас вылезла всего одна ошибка. “Bad practices” не "ломают" программу, а просто могут вызвать проблемы, например, с дальнейшей работой, скростью работы, безопастностью и тп
